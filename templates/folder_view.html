<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
<!-- 导入模板引擎 -->
<script type="text/javascript" src='../static/js/template-native.js'></script>
<script type="text/javascript" src="../static/js/jquery-1.11.1.min.js"></script>
<title>无标题文档</title>
	<style type="text/css">
		*{
			margin:0;
			padding:0;
			}
		a{
			text-decoration: none;
			color:black;
			}
		img{
			border:none;
			}
		.f_l{
			float: left;
			}
		.f_r{
			float: right;
			}
		/* 清除浮动 */
		.clearfix::before,
		.clearfix::after{
			content:'';
			display: block;
			line-height: 0;
			height: 0;
			visibility: hidden;
			clear: both;
			}
		a{
			text-decoration: none;
			}

		ol,ul{
			list-style: none;
			}
		.main{
			width:80%;
			}
		.mainLeft{
			width:20%;
			margin-top:56px;
			margin-right:20px;
			margin-left:40px;
			}
		.mainLeft span{
			display:block;
			width:100%;
			max-width:128px;
			height:32px;
			background-color:#4c4e5a;
			color:#fff;
			line-height:32px;
			text-align:center;
			border-radius:5px;
			margin-bottom:20px;
			font-size:14px;
			}
		.mainLeft span:hover{
			background-color:rgb(56,57,63);
			cursor:pointer;
			}
		.mainRight{
			margin-top:15px;
			width:70%;
			}
		.mainRight h3{
			margin-top:10px;
			margin-bottom:20px;
			}
		.mainRight .contents{
			margin-bottom:10px;
			border:1px solid #fff;
			border-radius:4px;
			width:100px;
			height:100px;
			padding-top:5px;
			position:relative;
			cursor:pointer;
			float:left;
			margin-right:10px;
			text-align:center;
			}
		.contents img{
			width:70px;
			height:60px;
			margin-top:5px;
			}
		.contents .title{
			margin-top:5px;
			}
		.contents:hover{
			
			border:1px solid rgba(204,204,204,0.7);
			}
		.current{
			background-color:skyblue;
			}
	</style>
	
</head>

<body>
        <div class="main clearfix">
        	<div class="mainLeft f_l">
            	<span class="need updata">修改文件</span>
                <span class="need paint">标注文件</span>
                <span class="need delete">删除文件夹</span>
                <span class="need creat">新建文件夹</span>
                <span class="need lala">******</span>
            </div>
            <div class="mainRight f_l">
            	
                
            </div>
        </div>
</body>
</html>

<script type="text/javascript">
		//页面加载完成根据数据库显示文件
		$.ajax({
                url: 'http://172.18.77.15:31555/folder-traverse&listdirs', //请求地址
                type: 'POST',  //请求方式为post
                //data: { 'type': geoType, 'geo': geoData, 'att': attData }, //传入参数 
                dataType: 'json', //返回数据格式
                //请求成功完成后要执行的方法  
                success: function (response) {
                    var str="";
                    str+='<h3>文件夹列表</h3>';
                    //var mainRight = document.getElementsByClassName('mainRight')[0];
                    for(var i=0;i<response.length;i++){
                    	str+='<div class="contents">'+
                		'<img src="../static/images/wjj.jpg" alt=""/>'+
                    	'<div class="title">'+response[i].name+'</div></div>'
                    }
                    document.getElementsByClassName('mainRight')[0].innerHTML = str;
             
		var need = document.getElementsByClassName("need");
		var nameList = document.getElementsByClassName("title");
		//console.log(nameList);
		var divList = document.getElementsByClassName('contents');
		for (var i = 0; i < divList.length; i++) {
			//console.log(nameList[i]);
			divList[i].onclick = function () { 
				for (var j = 0; j < divList.length; j++){
					divList[j].className="contents";
				}
				this.className = "contents current";
				var tag = document.getElementsByClassName("current")[0];
				var name = tag.children[1].innerText;
				
				need[0].onclick=function (){
					window.location.href="http://172.18.77.15:31555/uploadpage&"+name;
				}
				need[1].onclick=function(){
					window.location.href="http://172.18.77.15:31555/folder-imgsview&"+name;
				}
				need[2].onclick=function(){
					tag.parentNode.removeChild(tag);
				}
				need[4].onclick=function(){
					window.location.href="http://172.18.77.15:31555/folder-result&"+name;
				}
			}
			need[3].onclick=function(){
				newfile = document.createElement('div');
				newfile.className = "contents";
				newfile.innerHTML = 
				'<img src="static/images/wjj.jpg" alt=""/>'+
				'<div class="title">'+'file'+
						'</div>';
				var mainRight = document.getElementsByClassName('mainRight')[0];
				mainRight.appendChild(newfile);
				console.log(divList.length);
			}
		}
		   }
                
            });
	</script>
