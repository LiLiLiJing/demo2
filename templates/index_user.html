<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>demo</title>
		<meta name="description" content="">
		<meta name="keywords" content="">
		<script src="../static/libs/jquery-1.11.2.min.js" type="text/javascript"></script>
		<style type="text/css">
			* {
            padding: 0;
            margin: 0;
			font: 14px "微软雅黑";
        	}
			body{
				background-color:#eee;
				}
			img{
				border:none;
				width:100px;
				height:100px;
				}
			ul,ol{
				list-style:none;
			}
	        table {
	            border-collapse: collapse;
	            border-spacing: 0;
	            border: 1px solid #c0c0c0;
	            width: 95%;
	            margin-bottom:15px;
				}
	        table:hover{
	            background-color: #fafafa;
	        }
	        table div{
            font-size:14px;
            font-weight:bold;
        	}
	        th,
	        td {
	            border: 1px solid #d0d0d0;
	            color: #404060;
	            padding: 10px;
	        }
	        td{
            
            word-break:break-all;
            
	        }
	        .contents{
	        	width:1300px;
	        	margin:50px auto;
	        	border:1px solid red;
	        }
	        .fl{
	        	float:left;
	        }
	        .fr{
	        	float:right;
	        }
	        .clearfix:after{
				content:'';
				display:block;
				clear:both;
			}
			.left{
				margin:5px;
			}
			.left ul{
				width:200px;
			}
			.left li{
				background-color:orange;
				margin-bottom:5px;
				height:58px;
				overflow:hidden;
				cursor:pointer;
			}
			.left li:hover{
				background-color:#fff;
			}
		</style>
	</head>
	
	<body>
		<div class="contents clearfix">
			<div class="left fl">
				<ul>
					
				</ul>
			</div>
			<div class="right fl">
				
			</div>
		</div>
		
	</body>
	<script type="text/javascript" src="../static/js/template-native.js"></script>
	
	<script type="text/javascript">
		function imgInfo(info){
			var str="";
			for(var i=0;i<info.length;i++){
				var storename=info[i].storename;
				var workspace=info[i].workspacename;
				console.log(storename);
				$.ajax({
	                url:'http://172.18.77.15:31555/thumbnail&'+workspace,
	                type:'get',
	                dataType:'JSON',
	                success:function(data){
	                	
	                    
	                    for(var ddd=0;ddd<data.length;ddd++){
	                        
	                        if(data[ddd].name==storename){
	                            //str+="<li class='infoBoxLi'><img src='"+data[ddd].url+"' ></li>";
	                            console.log(data[ddd].name);
	                            
	                        }
	                    }
	                    
	                }

            	})
			}
			
		}
		//获取数据函数
		function show(){
			$.ajax({
				url:'http://172.18.77.15:{{store_dict['port_number']}}/lblorder-manip&get-orders',
				type:'POST',
				dataType:'JSON',
				success:function(data){
					//console.log(data);
					var str="";
					for(var i=0;i<data.length;i++){
						str+='<li data-index='+data[i].id+'>';
						str+='<div>id:'+data[i].id+'</div>'+
							 
							 '<div>描述信息:<br>'+data[i].description+'</div>'
						str+='</li>';
					}
					$(".left>ul").html(str);
					$(".left>ul>li").click(function(){
						var index=$(this)[0].dataset['index'];
						$.ajax({
							url:'http://172.18.77.15:{{store_dict['port_number']}}/lblorder-manip&proc-order:'+index+':json',
							type:'POST',
							dataType:'JSON',
							success:function(info){
								console.log(info);
								imgInfo(info.storeinfos);
							},
							error:function(){

							}
						});
					});
					
				},
				error:function(err){
					console.log(err);
				}
			})
		}
		show();
		
	</script>
</html>